<script>

  import { states } from "$lib/states.svelte.js";
  import { getBreakpoint } from "$lib/utils";

  import "$lib/../styles/resets.scss";
  import "$lib/../styles/global.scss";

  import { browser } from '$app/environment'
  import smoothscroll from 'smoothscroll-polyfill';
  if (browser) {
    smoothscroll.polyfill();
  }

  let {
    data,
    children,
  } = $props();

  import { onMount } from 'svelte';
  onMount( () => {
    states.breakpoint = getBreakpoint();
  });

  const onResize = () => {
    states.breakpoint = getBreakpoint();
  };

  import { onNavigate } from '$app/navigation';

  onNavigate((navigation) => {
    if (!document.startViewTransition || navigation.type === 'goto') return;
    return new Promise((resolve) => {
      document.startViewTransition(async () => {
        resolve();
        await navigation.complete;
      });
    });
  });

</script>

<svelte:window onresize={ onResize } />

<main>
  {@render children?.()}
</main>

